{"remainingRequest":"C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\src\\views\\search.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\src\\views\\search.vue","mtime":1595769521857},{"path":"C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dell\\Desktop\\KoalaSleep\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCByZWNvbW1lbmQgZnJvbSAiLi4vY29tcG9uZW50cy9yZWNvbW1lbmQvcmVjb21tZW5kIjsKaW1wb3J0IFRpdGxlIGZyb20gIi4uL2NvbXBvbmVudHMvdGl0bGUvdGl0bGUiOwppbXBvcnQgc29uZ3MgZnJvbSAiLi4vY29tcG9uZW50cy9zb25nL3NvbmciOwppbXBvcnQgVXNlbGVzcyBmcm9tICIuLi9jb21wb25lbnRzL1VzZWxlc3MvVXNlbGVzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6ICIiLAogICAgICBob3Q6IFtdLAogICAgICBsaXN0OiBbXSwKICAgICAgc2hvdzogdHJ1ZSwKICAgICAgaGlzdG9yeUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5heGlvcy5hbGwoW3RoaXMuZ2V0RGF0YSgiL3NlYXJjaC9ob3QiKV0pLnRoZW4odGhpcy5heGlvcy5zcHJlYWQoZnVuY3Rpb24gKGhvdCkgewogICAgICBfdGhpcy5ob3QgPSBob3QuZGF0YS5yZXN1bHQuaG90czsKICAgIH0pKTsKCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImhpc3RvcnkiKSAhPSBudWxsKSB7CiAgICAgIHRoaXMuaGlzdG9yeUxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJoaXN0b3J5IikpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5oaXN0b3J5TGlzdCA9IFtdOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSh1cmwpIHsKICAgICAgcmV0dXJuIHRoaXMuYXhpb3MuZ2V0KHVybCk7CiAgICB9LAogICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgIHRoaXMuc2hvdyA9IGZhbHNlOwogICAgICB0aGlzLnNlYXJjaFN1YWx0KHZhbHVlKTsKICAgIH0sCiAgICBzZWFyY2hTdWFsdDogZnVuY3Rpb24gc2VhcmNoU3VhbHQodmFsdWUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNob3cgPSBmYWxzZTsKCiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICB0aGlzLmF4aW9zLmdldCgiL3NlYXJjaD9rZXl3b3Jkcz0iICsgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMyLmxpc3QgPSByZXMuZGF0YS5yZXN1bHQuc29uZ3M7CgogICAgICAgICAgX3RoaXMyLmhpc3RvcnkoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFydG5hbWU6IGZ1bmN0aW9uIGFydG5hbWUob2JqKSB7CiAgICAgIHZhciBzdHIgPSAiIjsKICAgICAgb2JqLmFydGlzdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHN0ciArPSBpdGVtLm5hbWUgKyAiICI7CiAgICAgIH0pOwogICAgICByZXR1cm4gc3RyOwogICAgfSwKICAgIGhpc3Rvcnk6IGZ1bmN0aW9uIGhpc3RvcnkoKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJoaXN0b3J5IikgPT09IG51bGwpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJoaXN0b3J5IiwgSlNPTi5zdHJpbmdpZnkoW3RoaXMudmFsdWVdKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBhcnIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJoaXN0b3J5IikpOwogICAgICAgICAgYXJyLnVuc2hpZnQodGhpcy52YWx1ZSk7CiAgICAgICAgICB2YXIgc2V0ID0gbmV3IFNldChhcnIpOwogICAgICAgICAgdGhpcy5oaXN0b3J5TGlzdCA9IEFycmF5LmZyb20oc2V0KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJoaXN0b3J5IiwgSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbShzZXQpKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGVsZWN0OiBmdW5jdGlvbiBkZWxlY3Qoc3RyKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5oaXN0b3J5TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpdGVtID09PSBzdHIpIHsKICAgICAgICAgIF90aGlzMy5oaXN0b3J5TGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJoaXN0b3J5IiwgSlNPTi5zdHJpbmdpZnkodGhpcy5oaXN0b3J5TGlzdCkpOwogICAgICB0aGlzLmhpc3RvcnkoKTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHJlY29tbWVuZDogcmVjb21tZW5kLAogICAgVGl0bGU6IFRpdGxlLAogICAgc29uZ3M6IHNvbmdzLAogICAgVXNlbGVzczogVXNlbGVzcwogIH0KfTs="},{"version":3,"sources":["search.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <van-search\r\n      v-model=\"value\"\r\n      placeholder=\"请输入搜索关键词\"\r\n      @input=\"show=true\"\r\n      @search=\"input\"\r\n      input-align=\"center\"\r\n    />\r\n    <div v-show=\"show\">\r\n      <Title title=\"热门搜索\"></Title>\r\n      <recommend>\r\n        <span\r\n          v-for=\"(item,index) in hot\"\r\n          :key=\"index\"\r\n          @click=\"searchSualt(item.first)\"\r\n        >{{item.first}}</span>\r\n      </recommend>\r\n      <Title title=\"历史搜索\"></Title>\r\n      <van-cell :title=\"item\" v-for=\"(item,index) in historyList\" :key=\"index\">\r\n        <template #right-icon>\r\n          <i class=\"iconfont icon-guanbi\" @click=\"delect(item)\"></i>\r\n        </template>\r\n      </van-cell>\r\n      <Useless v-if=\"historyList.length===0\"></Useless>\r\n    </div>\r\n    <div class=\"result\" v-show=\"!show\">\r\n      <songs\r\n        v-for=\"item in list\"\r\n        :key=\"item.id\"\r\n        :title=\"item.name\"\r\n        :name=\"artname(item)\"\r\n        :id=\"item.id\"\r\n      ></songs>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport recommend from \"../components/recommend/recommend\";\r\nimport Title from \"../components/title/title\";\r\nimport songs from \"../components/song/song\";\r\nimport Useless from \"../components/Useless/Useless\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      value: \"\",\r\n      hot: [],\r\n      list: [],\r\n      show: true,\r\n      historyList: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.axios.all([this.getData(\"/search/hot\")]).then(\r\n      this.axios.spread((hot) => {\r\n        this.hot = hot.data.result.hots;\r\n      })\r\n    );\r\n    if (localStorage.getItem(\"history\") != null) {\r\n      this.historyList = JSON.parse(localStorage.getItem(\"history\"));\r\n    }else{\r\n      this.historyList=[]\r\n    }\r\n  },\r\n  methods: {\r\n    getData(url) {\r\n      return this.axios.get(url);\r\n    },\r\n    input(value) {\r\n      this.show = false;\r\n      this.searchSualt(value);\r\n    },\r\n    searchSualt(value) {\r\n      this.show = false;\r\n      if (value) {\r\n        this.value = value;\r\n        this.axios.get(\"/search?keywords=\" + value).then((res) => {\r\n          this.list = res.data.result.songs;\r\n          this.history();\r\n        });\r\n      }\r\n    },\r\n    artname(obj) {\r\n      let str = \"\";\r\n      obj.artists.forEach((item) => {\r\n        str += item.name + \" \";\r\n      });\r\n      return str;\r\n    },\r\n    history() {\r\n      if (this.value) {\r\n        if (localStorage.getItem(\"history\") === null) {\r\n          localStorage.setItem(\"history\", JSON.stringify([this.value]));\r\n        } else {\r\n          let arr = JSON.parse(localStorage.getItem(\"history\"));\r\n          arr.unshift(this.value);\r\n          const set = new Set(arr);\r\n          this.historyList = Array.from(set);\r\n          localStorage.setItem(\"history\", JSON.stringify(Array.from(set)));\r\n        }\r\n      }\r\n    },\r\n    delect(str) {\r\n      this.historyList.forEach((item, index) => {\r\n        if (item === str) {\r\n          this.historyList.splice(index, 1);\r\n        }\r\n      });\r\n      localStorage.setItem(\"history\", JSON.stringify(this.historyList));\r\n      this.history();\r\n    },\r\n  },\r\n  components: {\r\n    recommend,\r\n    Title,\r\n    songs,\r\n    Useless,\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/views"}]}